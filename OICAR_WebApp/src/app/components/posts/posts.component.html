
<div class="p-4 textWhite">
    <h2 class="text-center">Posts</h2>

    <mat-accordion>
        <mat-expansion-panel 
            (opened)="panelOpenState = true"
            (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Filters
                </mat-panel-title>
            </mat-expansion-panel-header>

            <form #f="ngForm" [formGroup]="filters">
                <div class="d-flex flex-column flex-lg-row m-auto justify-content-around">
                    <!-- Status -->
                    <div class="mt-3">
                        <div>
                            <h4>Status</h4>
                        </div>
                        <div>
                            <section class="d-flex flex-column">
                                <mat-checkbox checked="true" formControlName="statusActiveCtrl">Active</mat-checkbox>
                                <mat-checkbox formControlName="statusNotActiveCtrl">Not active</mat-checkbox>
                            </section>
                        </div>
                    </div>

                    <!-- Category -->
                    <div class="mt-3">
                        <div>
                            <h4>Category</h4>
                        </div>
                        <div>
                            <mat-form-field appearance="fill">
                                <mat-label>Category</mat-label>
                                <mat-select formControlName="categoryCtrl">
                                   <mat-option *ngFor="let category of categories" [value]="category.idcategory">
                                        {{category.title}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- Duration -->
                    <div class="mt-3">
                        <div>
                            <h4>Duration</h4>
                        </div>
                        <div>
                            <mat-form-field appearance="fill" class="w-100">
                                <mat-label>Duration in months</mat-label>
                                <input matInput type="number" formControlName="durationCtrl">
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Location -->
                    <div class="mt-3">
                        <div>
                            <h4>Location</h4>
                        </div>
                        <div>
                            <mat-form-field appearance="fill" class="w-100">
                                <mat-label>Location</mat-label>
                                <input type="text"
                                       matInput
                                       formControlName="locationCtrl"
                                       [matAutocomplete]="auto">
                                <mat-autocomplete #auto="matAutocomplete">
                                    <mat-option *ngFor="let option of filteredLocationOptions | async" [value]="option">
                                        {{option}}
                                      </mat-option>
                                </mat-autocomplete>
                              </mat-form-field>
                        </div>
                    </div>
                </div>
            </form>
        </mat-expansion-panel>
    </mat-accordion>

    <mat-tab-group>
        <mat-tab label="Project posts">
            <div *ngFor="let post of filteredProjectPosts" class="mt-3">
                <app-project-post [projectPost]="post"></app-project-post>
                <button routerLink="../profile/view/{{this.authService.getLoggedUserId()}}/{{post.appUser?.idappUser}}" mat-raised-button color="primary">View all posts from this user</button>
            </div>
        </mat-tab>
        <mat-tab label="Service posts">
            <!-- <div *ngFor="let post of servicePosts" class="mt-3">
                <app-service-post [servicePost]="post"></app-service-post>
            </div>  -->
        </mat-tab>
    </mat-tab-group>
</div>